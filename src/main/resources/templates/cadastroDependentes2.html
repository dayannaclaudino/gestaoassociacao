<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{index}">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
   
    <!----======== CSS ======== -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    
    <title>Gestão da Associação Quilombola Castainho</title> 
</head>

<body>
  <section layout:fragment="content">
    <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
        <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">    
          <h1 class="h2">Associado</h1>
          <div class="d-grid gap-2 d-md-flex justify-content-md-end">
            <a class="btn btn-sm me-md-2 text-white fw-bold"  style="background-color: #F2994A;" 
                      role="button" type="button" href="/associados/novo">Adicionar Associado</a>
            <a class="btn btn-sm text-white fw-bold"  style="background-color: #F2994A;" 
                      role="button" type="button" href="/associados/listar">Listar</a>
          </div>
        </div>
    
<div class="container">  
<form th:action="@{/salvar}" th:object="${dependente}" method="POST" >
    <div class="card">
      <div class="card-header fw-bold">     
          <h6 class="card-title">Cadastro de Dependentes</h6>
      </div>
        <div class="card-body">
            <div class="row g-2">

                <label>Nome:</label>
                <input type="text" placeholder="Digite o nome do dependente" th:value="${nome}" name="nome" required />
                <span class="text-danger" th:if="${#fields.hasErrors('nome')}" th:errors="*{nome}"></span>
                
                <label>Associado:</label> 

                <select th:field="${dependente.associado}" required>
                    <option value="">Escolha o Associado</option>
                    <option th:each="associado : ${associados}" 
                            th:value="${associado.id}" 
                            th:text="${associado.nome}">
                    </option>
                </select>
                
                
                <input type="submit" value="Salvar" />
                <input type="reset" value="Limpar" />
                </form>
                <br>
                <br>
                <table>
                    <tr>
                        <th>id</th>
                        <th>Nome</th>
                        <th>Associado</th>
                        <th>Remover</th>
                        <th>Editar</th>
                    </tr>
                
                    <tr th:each="dependente : ${dependentes}">
                        <td th:text="${dependente.id}"></td>
                        <td th:text="${dependente.nome}"></td>
                        <td th:text="${dependente.associado?.nome}"></td>
                    </tr>
                </table>
</form>
</div>
</div> <!-- container end-->
        
</div> </main>
</section>
    <script src="/js/bootstrap.bundle.min.js"></script>
</body>
</html>